<div class="flex min-h-screen items-center justify-center bg-gray-100 p-6">
  <div class="w-full max-w-4xl bg-white p-10 shadow-lg rounded-lg">
    <h2 class="text-2xl font-bold text-gray-800 text-center mb-4">Register a Hospital and Admin</h2>
    <p class="text-gray-600 text-center mb-6">Provide hospital and admin details to create an account</p>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Hospital Information -->
      <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-2">Hospital Information</h3>
        <div class="space-y-3">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Hospital Name</mat-label>
            <input matInput formControlName="name">
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Address</mat-label>
            <input matInput formControlName="addressLine1">
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>City</mat-label>
            <input matInput formControlName="city">
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>State</mat-label>
            <mat-select formControlName="state">
              <mat-option *ngFor="let state of states" [value]="state">{{ state }}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Zip Code</mat-label>
            <input matInput formControlName="postal"
            type="text"
            maxlength="5"
            pattern="\d{5}" required>
            <mat-error *ngIf="registerForm.get('postal')?.invalid">Enter a valid 5-digit postal code</mat-error>
          </mat-form-field>


          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Telephone</mat-label>
            <input matInput formControlName="telephone"
                   type="text"
                   maxlength="10"
                   pattern="\d{10}" required>
            <mat-error *ngIf="registerForm.get('telephone')?.invalid">
              Enter a valid 10-digit telephone number
            </mat-error>
          </mat-form-field>


          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Hospital Type</mat-label>
            <mat-select formControlName="type">
              <mat-option value="General">General</mat-option>
              <mat-option value="Specialty">Specialty</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Trauma Level</mat-label>
            <mat-select formControlName="traumaLevel">
              <mat-option *ngFor="let level of traumaLevels" [value]="level">{{ level }}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-checkbox formControlName="hasHelipad">Has Helipad</mat-checkbox>
        </div>
      </div>

      <!-- Admin Information -->
      <div>
        <h3 class="text-lg font-semibold text-gray-700 mb-2">Admin Information</h3>
        <div class="space-y-3">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Username</mat-label>
            <input matInput formControlName="username">
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Password</mat-label>
            <input matInput [type]="passwordVisible ? 'text' : 'password'"
                   formControlName="passwordHash"
                   required>
            <button mat-icon-button matSuffix (click)="togglePassword()" type="button">
              <mat-icon>{{ passwordVisible ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>

            <mat-error *ngIf="registerForm.get('passwordHash')?.hasError('minlength')">
              Password must be at least 6 characters
            </mat-error>
          </mat-form-field>


          <mat-form-field appearance="outline" class="w-full">
            <mat-label>First Name</mat-label>
            <input matInput formControlName="firstName">
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Last Name</mat-label>
            <input matInput formControlName="lastName">
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" type="email" required>
            <mat-error *ngIf="registerForm.get('email')?.invalid">
              Enter a valid email address
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Phone</mat-label>
            <input matInput formControlName="phone"
                   type="text"
                   maxlength="10"
                   pattern="\d{10}" required>
            <mat-error *ngIf="registerForm.get('phone')?.invalid">
              Enter a valid 10-digit phone number
            </mat-error>
          </mat-form-field>


          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Address</mat-label>
            <input matInput formControlName="addressLine1Admin">
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>City</mat-label>
            <input matInput formControlName="cityAdmin" required>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>State</mat-label>
            <mat-select formControlName="stateAdmin">
              <mat-option *ngFor="let state of states" [value]="state">{{ state }}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Zip Code</mat-label>
            <input matInput formControlName="postalAdmin"
                   type="text"
                   maxlength="5"
                   pattern="\d{5}" required>
            <mat-error *ngIf="registerForm.get('postalAdmin')?.invalid">Enter a valid 5-digit postal code</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Country</mat-label>
            <input matInput formControlName="country" required>
          </mat-form-field>

          <mat-form-field  appearance="outline" class="w-full">
            <mat-label>Date of Birth</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="dateOfBirth">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>
      </div>


      <!-- Register Button -->
      <div class="col-span-1 md:col-span-2 text-center mt-6 flex justify-center">
        <button type="submit" [disabled]="loading"
          class="w-1/3 flex items-center justify-center gap-2 p-3 rounded-lg bg-gradient-to-r from-blue-500 to-blue-700
                text-white font-semibold tracking-wide shadow-md transition-all duration-300 ease-in-out
                hover:shadow-lg hover:from-blue-600 hover:to-blue-800 active:scale-95 disabled:opacity-50 cursor-pointer">

          <!-- Spinner Animation -->
          <svg *ngIf="loading" class="animate-spin h-5 w-5 text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 0116 0H4z"></path>
          </svg>

          <span *ngIf="!loading">Register</span>
          <span *ngIf="loading">Registering...</span>
        </button>
      </div>
    </form>

    <!-- Back to Login Button -->
    <div class="col-span-1 md:col-span-2 text-center mt-2 flex justify-center space-x-6">
      <button type="button" (click)="navigateToLogin()"
        class="w-1/3 p-3 bg-gray-500 text-white font-semibold rounded-lg
               shadow-md hover:shadow-lg transition-all duration-300 ease-in-out
               hover:bg-gray-600 active:scale-95 focus:ring-4 focus:ring-gray-300 cursor-pointer">
        Back to Login
      </button>
    </div>

    <!-- Success Message (Visible During Processing & After Completion) -->
    <p *ngIf="successMessage" class="text-green-600 text-center pt-4 animate-fade-in">
      {{ successMessage }}
    </p>

    <!-- Error Message -->
    <p *ngIf="errorMessage" class="text-red-600 text-center pt-4 animate-fade-in">
      {{ errorMessage }}
    </p>

  </div>
</div>
