<app-navbar></app-navbar>
<div class="ml-60 p-6 bg-gray-100 min-h-screen">
  <div class="max-w-4xl mx-auto bg-white p-10 shadow-lg rounded-lg">
    <h2 class="text-2xl font-bold text-gray-800 text-center mb-4">Register a Patient</h2>
    <p class="text-gray-600 text-center mb-6">Fill out patient details below</p>

    <form [formGroup]="patientForm" (ngSubmit)="onSubmit()" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Basic Info -->
      <mat-form-field appearance="fill" class="w-full">
        <mat-label>First Name</mat-label>
        <input matInput formControlName="firstName" maxlength="50">
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Last Name</mat-label>
        <input matInput formControlName="lastName" maxlength="50">
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Date of Birth</mat-label>
        <input matInput [matDatepicker]="dobPicker" formControlName="dateOfBirth">
        <mat-datepicker-toggle matSuffix [for]="dobPicker"></mat-datepicker-toggle>
        <mat-datepicker #dobPicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Gender</mat-label>
        <mat-select formControlName="gender">
          <mat-option value="Male">Male</mat-option>
          <mat-option value="Female">Female</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Blood Type</mat-label>
        <mat-select formControlName="bloodType">
          <mat-option *ngFor="let type of bloodTypes" [value]="type">{{ type }}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Phone</mat-label>
        <input matInput formControlName="phone" type="tel" maxlength="15">
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Height (in)</mat-label>
        <input matInput formControlName="height" type="number">
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Weight (lbs)</mat-label>
        <input matInput formControlName="weight" type="number">
      </mat-form-field>

      <!-- Address Info -->
      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Address Line 1</mat-label>
        <input matInput formControlName="addressLine1" maxlength="255">
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Address Line 2</mat-label>
        <input matInput formControlName="addressLine2" maxlength="255">
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full">
        <mat-label>City</mat-label>
        <input matInput formControlName="city" maxlength="100">
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full">
        <mat-label>State</mat-label>
        <input matInput formControlName="state" maxlength="100">
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Postal Code</mat-label>
        <input matInput formControlName="postal" maxlength="20">
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Country</mat-label>
        <input matInput formControlName="country" maxlength="100">
      </mat-form-field>

      <!-- Emergency Contact -->
      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Emergency Contact Name</mat-label>
        <input matInput formControlName="emergencyContactName" maxlength="100">
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Emergency Contact Phone</mat-label>
        <input matInput formControlName="emergencyContactPhone" maxlength="15">
      </mat-form-field>

      <!-- Submit Button -->
      <div class="col-span-1 md:col-span-2 text-center mt-6">
        <button mat-flat-button color="primary" type="submit" [disabled]="loading || patientForm.invalid">
          {{ loading ? 'Registering...' : 'Register Patient' }}
        </button>
      </div>
    </form>

    <!-- Feedback Messages -->
    <p *ngIf="successMessage" class="text-green-600 text-center pt-4">{{ successMessage }}</p>
    <p *ngIf="errorMessage" class="text-red-600 text-center pt-4">{{ errorMessage }}</p>
  </div>
</div>
